{"ts":1367503557122,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/* global window, Ext:true */\n\n(function() {\n\n    Ext.define('Ext.oj-sqlbuilder.SQLTableSprite', {\n        extend: 'Ext.draw.Sprite',\n        alias: ['widget.sqltablesprite'],\n        bConnections: false,\n        startDrag: function(id) {\n            var me = this,\n                win, sqlTablePanel, xyParentPos, xyChildPos;\n\n            // get a reference to a sqltable\n            win = Ext.getCmp(id);\n\n            // get the main sqlTablePanel\n            sqlTablePanel = Ext.getCmp('SQLTablePanel');\n\n            // get the main sqlTablePanel position\n            xyParentPos = sqlTablePanel.el.getXY();\n\n            // get the size of the previously added sqltable\n            xyChildPos = win.el.getXY();\n\n            me.prev = me.surface.transformToViewBox(xyChildPos[0] - xyParentPos[0] + 2, xyChildPos[1] - xyParentPos[1] + 2);\n        },\n\n        onDrag: function(relPosMovement) {\n            var xy, me = this,\n                attr = this.attr,\n                newX, newY;\n            // move the sprite\n            // calculate new x and y position\n            newX = me.prev[0] + relPosMovement[0];\n            newY = me.prev[1] + relPosMovement[1];\n            // set new x and y position and redraw sprite\n            me.setAttributes({\n                x: newX,\n                y: newY\n\n            }, true);\n        }\n    });\n\n}());"]],"start1":0,"start2":0,"length1":0,"length2":1352}]],"length":1352}
